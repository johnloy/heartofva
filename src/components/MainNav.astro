---
import path from 'path'
import mainNavItems from '../content/main-nav.yml'
import MeetingsNav from './MeetingsNav.astro'
const mainNavPages = await Astro.glob('../pages/**/*.astro')

const mainNavPagesData = Object.fromEntries(
  mainNavPages.map((page) => [
    path.parse(page.file).name,
    {
      title: page.title,
      url: page.url
    }
  ])
)
---

<div>
  <nav class="main-nav">
    <ul>
      {
        mainNavItems.map((item) => {
          const itemObj = mainNavPagesData[item]
          return (
            <li data-name={item}>
              {item === 'meetings' ? (
                <MeetingsNav title={itemObj.title} url={itemObj.url} />
              ) : (
                <a href={itemObj.url}>{itemObj.title}</a>
              )}
            </li>
          )
        })
      }
    </ul>
  </nav>
</div>

<style>
  ul {
    column-gap: 1rem;
  }

  li {
    position: relative;
  }

  /* li + li::before {
    content: 'â€¢';
    display: block;
    position: absolute;
    left: -0.9rem;
    color: black;
    font-size: 140%;
    top: 0.7rem;
  } */

  :global(.main-nav a:not(.logo)) {
    font-family: "Merriweather Sans", sans-serif;
    text-decoration: none !important;
    font-size: var(--font-size-base);
  }

  /* nav a::after {
    content: '';
    display: block;
    position: relative;
    border-top: 1px dotted #dbfadc;
  } */


</style>
